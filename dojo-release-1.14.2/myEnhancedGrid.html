<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="dijit/themes/claro/claro.css" />
    <style type="text/css">
      @import "dojo/resources/dojo.css";
      @import "dijit/themes/claro/claro.css";
      @import "dojox/grid/enhanced/resources/claro/EnhancedGrid.css";
      @import "dojox/grid/enhanced/resources/EnhancedGrid_rtl.css";

      /*Grid need a explicit width/height by default*/
      #grid {
        width: 43em;
        height: 20em;
      }
    </style>
    <script>
      dojoConfig = { parseOnLoad: true };
    </script>
    <script src="dojo/dojo.js"></script>

    <script>
      dojo.require("dojox.grid.EnhancedGrid");
      dojo.require("dojox.grid.enhanced.plugins.Pagination");
      dojo.require("dojo.data.ItemFileWriteStore");

      dojo.ready(function() {

        

        /*set up data store*/
        var data = {
          identifier: "id",
          items: [],
          method: function(response){
            this.items.push(...response.data);
            console.log("Hello");
          }
        };
        var data_list =
        [
          // {
          //   col1: "normal",
          //   col2: false,
          //   col3: "But are not followed by two hexadecimal",
          //   col4: 29.91
          // },
          // {
          //   col1: "important",
          //   col2: false,
          //   col3: "Because a % sign always indicates",
          //   col4: 9.33
          // },
          // {
          //   col1: "important",
          //   col2: false,
          //   col3: "Signs can be selectively",
          //   col4: 19.34
          // }
        ];
              // get some data, convert to JSON


        // var rows = 200;
        // for (var i = 0, l = data_list.length; i < rows; i++) {
        //   data.items.push(dojo.mixin({ id: i + 1 }, data_list[i % l]));
        // }

        dojo.xhrGet({
          url:"http://localhost:80/php-rest-playground/api/post/read.php",
          handleAs:"json",
          headers: {
            "X-Requested-With" : null
          },
          load: dojo.hitch(data, "method")
        });

        console.log(data);


        var store = new dojo.data.ItemFileWriteStore({data:data});
        console.log(store)



        

        /*set up layout*/
        var layout = [
          [
            { name: "Column 1", field: "id" },
            { name: "Column 2", field: "title" },
            { name: "Column 3", field: "body", width: "230px" },
            { name: "Column 4", field: "author" },
            { name: "Column 5", field: "category_name" }
          ]
        ];

        /*create a new grid:*/
        var grid = new dojox.grid.EnhancedGrid(
          {
            id: "grid",
            store: store,
            structure: layout,
            rowSelector: "20px",
            plugins: {
              pagination: {
                pageSizes: ["25", "50", "100", "All"],
                description: true,
                sizeSwitch: true,
                pageStepper: true,
                gotoButton: true,
                /*page step to be displayed*/
                maxPageStep: 4,
                /*position of the pagination bar*/
                position: "bottom"
              }
            }
          },
          document.createElement("div")
        );

        /*append the new grid to the div*/
        dojo.byId("gridDiv").appendChild(grid.domNode);

        /*Call startup() to render the grid*/
        grid.startup();
      });
    </script>
  </head>
  <body class="claro">
    <div id="gridDiv"></div>
  </body>
</html>
